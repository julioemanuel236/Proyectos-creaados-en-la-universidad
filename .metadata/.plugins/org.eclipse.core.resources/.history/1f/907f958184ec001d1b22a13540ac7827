package project;

import java.text.DecimalFormat;
import java.text.Format;

public class Garage {

	final private Car parking[];
	private int cars;
	private int selectedPos;
	DecimalFormat format = new DecimalFormat("#.00");
	
	public Garage(int n) {
		parking = new Car[n];
	}
	
	public Car get(int pos) {
		if(pos<1||pos>parking.length)return null;
		return parking[pos-1];
	}
	
	public void showParking() {
		for(int i=0;i<parking.length;i++) {
			System.out.print("Space "+(i+1)+": ");
			if(parking[i]==null)System.out.print("empty");
			else System.out.println(parking[i].toString());
		}
	}
	
	public void noCarsError() {
		System.out.println("There are no cars currently in the garage.");
	}
	
	public void driveCar() {
		
	}
	
	public void refuelCar() {
		if(isEmpty())noCarsError();
		Car car = selectCar();
		if(car==null) {
			System.out.println("THere is no car in that space!");
			System.out.println("Please create a Car for that space.");
			createCar();
		}
		System.out.println("How much fuel would you like to add?");
		System.out.println("Please enter an amount greater than zero.");
		
		int fuel = InputRead.nextInt();
		if(fuel<0) {
			System.out.println("Not valid");
		}
		double result = car.addFuel(fuel);
		if(result<0) {
			result = - result;
			System.out.println("The tank is not full and can take "+format.format(result) + " mor gallons of fule");						
		}		
		else {
			System.out.println("The tank is full and you have "+format.format(result)+" gallons left in the can." );
		}
		

	}
	
	public Car selectCar() {
		showParking();
		while(true) {
			int pos = InputRead.nextInt();
			if( pos<1||pos>parking.length) {
				System.out.println("Not valid");
			}
			else {
				selectedPos=pos-1;
				return get(pos);
			}
		}
	}
	
	public boolean isEmpty() {
		return cars==0;
	}
	
}
